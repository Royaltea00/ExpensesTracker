{% extends 'base.html' %}
{% load static %}

{% block title %}Expense Tracker - Home{% endblock %}

{% block content %}
  <div class="jumbotron">
    <h1 class="display-4">Welcome to Expense Tracker</h1>
    <p class="lead">Track your expenses and manage your budget effortlessly.</p>
  </div>

  {% if user.is_authenticated %}
    <h2>Hello, {{ user.username }}!</h2>

    <h3>Recent Expenses</h3>
    <ul>
      {% for expense in recent_expenses %}
        <li>{{ expense.category }} - ${{ expense.amount }} - {{ expense.date }}</li>
      {% endfor %}
    </ul>

    <h3>Total Expenses</h3>
    <p>${{ total_expenses }}</p>

    <h3>Monthly Expense Breakdown ({{ current_month_expenses.0.date|date:"F" }})</h3>
    <ul>
      {% for expense in current_month_expenses %}
        <li>{{ expense.category }} - ${{ expense.amount }}</li>
      {% endfor %}
    </ul>

    <h3>Add Expense</h3>
    <form method="post" action="{% url 'main:add_expense' %}">
      {% csrf_token %}
      {{ form_expense.as_p }}
      <button type="submit">Submit</button>
    </form>

    <h3>Add Category</h3>
    <form method="post" action="{% url 'main:add_category' %}">
      {% csrf_token %}
      {{ form_category.as_p }}
      <button type="submit">Submit</button>
    </form>

    <h3>Available Expense Categories</h3>
    <ul>
      {% for category in categories %}
        <li>{{ category.name }}</li>
      {% endfor %}
    </ul>

    <!-- Add more sections and details as needed -->

  {{% else %}
    <div class="alert alert-info" role="alert">
      Please <a href="{% url 'login' %}">log in</a> to access your expenses.
    </div>
  {% endif %}
{% endblock %}
